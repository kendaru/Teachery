/*! Teachery 13-04-2015 */
function Render(a){var b=this;this.call=a.callback||function(){},this.timeout=a.timeout||10,this.started=!1,this["break"]=!1,this.start=function(){function a(){return b["break"]?!1:(b.call(),void setTimeout(function(){window.requestAnimationFrame(a)},b.timeout))}return this.started?!1:(this["break"]=!1,this.started=!0,a(),this)},this.stop=function(){return this["break"]=!0,this.started=!1,this}}function fullScreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}function clockSettings(a){var b=this;this.elm=a.element||a.elm,this.settings=this.elm.querySelectorAll(".settings-bool > div"),this.callback=a.onChange||function(){},this.elm.onclick=function(a){a.target.classList.contains("settings-overlay")&&(this.elm.style.display="none")}.bind(this);for(var c=0;c<this.settings.length;c++)this.settings[c].onclick=function(){b.callback({name:this.dataset.name,value:this.dataset.value}),b.elm.style.display="none"};this.elm.style.display="table"}var Cookies={create:function(a,b){document.cookie=a+"="+b+";expires=Mon, 1 Jan 2020 00:00:00 UTC;"},remove:function(a){document.cookie=a+"=;expires=Thu, 01 Jan 1990 00:00:01 GMT;"},get:function(a){var b=new RegExp("(?:^"+a+"|; *"+a+")=(.*?)(?:;|$)","g"),c=b.exec(document.cookie);return c?c[1]:null}},Confirm=function(a){this.element=a.element,this.cancelCall=a.cancel||function(){},this.confirmCall=a.confirm||function(){},this.message=a.message||"N/A",this.yes=this.element.querySelector(".checkbox-confirm"),this.no=this.element.querySelector(".checkbox-cancel"),this.msg=this.element.querySelector(".checkbox-message"),this.element.onclick=function(a){if(a.target===this.yes)this.hide(),this.confirmCall();else{if(a.target===this.msg)return;this.hide(),this.cancelCall()}}.bind(this),document.onkeydown=function(a){27===a.keyCode&&(this.hide(),this.cancelCall()),13===a.keyCode&&(this.hide(),this.confirmCall())}.bind(this)};Confirm.prototype.show=function(){this.msg.innerHTML=this.message,this.element.classList.add("active")},Confirm.prototype.hide=function(){this.msg.innerHTML="",this.element.classList.remove("active")},window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}());var CSV={to_json:function(a){a=a.replace("\r","");for(var b=[],c=a.split("\n"),d=c[0].split(","),e=1,f=c.length-1;f>e;++e){for(var g=[],h=c[e].split(","),i=0,j=h.length;j>i;++i)g.push(h[i]);b.push(g)}return{titles:d,cells:b}}},Notification=function(a,b,c){var d=this;this.elm=document.createElement("p"),this.elm.innerHTML=a,this.allnots=document.querySelector("#notlist").children,this.elm.classList.add(b||"normal");for(var e=0;e<this.allnots.length;++e)this.allnots[e].innerHTML===a&&(this.allnots[e].remove(),setTimeout(d.elm.classList.add("show"),!1),d.elm.classList.add("shake"));document.querySelector("#notlist").appendChild(this.elm),setTimeout(function(){d.elm.classList.add("show")},10),setTimeout(function(){d.elm.classList.add("hide")},c+100||2100),setTimeout(function(){d.elm&&d.elm.parentNode&&d.elm.parentNode.removeChild(d.elm)},c+300||2300)},Timer=function(a){this.name=a.name,this.direction=a.direction||"up",this.callback=a.callback||function(){},this.time=!1,this.duration=0,this.lastTick=!1,this.pauseBool=!1,a.time&&this.setTime(a.time)};Timer.prototype.start=function(){return this.lastTick=new Date,this.pauseBool=!1,this},Timer.prototype.reset=function(){return this.duration=0,this.time=!1,this.pauseBool=!1,this.lastTick=!1,this},Timer.prototype.pause=function(){return this.pauseBool=!0,this},Timer.prototype.setName=function(a){return this.name=a,this},Timer.prototype.setTime=function(a){if(a.toString().match(":")){var b=a.split(":");this.time=parseInt(b[2]),this.time+=60*parseInt(b[1]),this.time+=3600*parseInt(b[0]),this.time*=1e3}else this.time=a},Timer.prototype.setDirection=function(a){return("up"==a||"down"==a)&&(this.direction=a,"down"==this.direction&&(this.setTime(this.duration-this.time),this.duration=0),"up"==this.direction&&(this.duration=this.time-this.duration,this.time=!1)),this},Timer.prototype.getDirection=function(){return this.direction},Timer.prototype.getName=function(){return this.name},Timer.prototype.getTime=function(){if(!this.lastTick)return this.timeLeft();var a,b=new Date;a=this.pauseBool?0:b-this.lastTick,this.duration+=a;var c=this.duration;this.lastTick=new Date,this.time&&"down"==this.direction&&(c=this.time-this.duration),0>c&&(this.callback(),this.duration=0);var d=parseInt(c%1e3/100),e=parseInt(c/1e3%60),f=parseInt(c/6e4%60),g=parseInt(c/36e5%24);return g=10>g?"0"+g:g,f=10>f?"0"+f:f,e=10>e?"0"+e:e,g+":"+f+":"+e+":"+d},Timer.prototype.isPaused=function(){return this.pauseBool},Timer.prototype.timeLeft=function(){var a=this.duration;this.time&&"down"==this.direction&&(a=this.time-this.duration),0>a&&(this.duration=0);var b=parseInt(a%1e3/100),c=parseInt(a/1e3%60),d=parseInt(a/6e4%60),e=parseInt(a/36e5%24);return e=10>e?"0"+e:e,d=10>d?"0"+d:d,c=10>c?"0"+c:c,e+":"+d+":"+c+":"+b};var Clock=function(a){var b,c=this,d=JSON.parse(Cookies.get("settings"))||{},e=a.appendTo||document.querySelector("main");for(this.element=document.querySelector(".shadowTimer").cloneNode(!0),this.element.classList.remove("shadowTimer"),setTimeout(function(){this.element.classList.remove("offscreen")}.bind(this),100),e.appendChild(this.element),this.title=this.element.querySelector(".checkbox-title input"),this.times=this.element.querySelectorAll(".checkbox-input input"),this.buttons=this.element.querySelectorAll(".checkbox-button a"),this.started=!1,this.mute=a.mute||1===d.auto_mute?!0:!1,this.endmute=a.endmute||1===d.auto_mute?!0:!1,this.id=a.id,this.endsoundsrc=d.finish||"airhorn",this.endsound=new Audio("sounds/"+this.endsoundsrc+".mp3"),this.sound=new Audio("sounds/hitmarker.mp3"),this.title.value=a.name||"Clock"+Math.floor(200*Math.random()),this.timer=new Timer({name:this.title.value,direction:a.direction||"down",time:a.time||d.clock||"00:10:00",callback:function(){this.endsound.play(),this.stop(),new Notification("Clock "+a.name+" finished.","normal",3500)}.bind(this)}),this.render=new Render({callback:function(){this.updateDisplay()}.bind(this),timeout:10}),b=0,l=this.buttons.length;b<l;b++)this.buttons[b].addEventListener("click",function(a){switch(a.preventDefault(),this.hash=this.hash.toLowerCase(),this.hash){case"#play":c.start();break;case"#fullscreen":c.fullscreen(!0);break;case"#remove":c.remove();break;case"#settings":new clockSettings({elm:document.querySelector(".settings-overlay"),onChange:function(a){switch(a.name){case"direction":c.timer.setDirection("UP"==a.value.toUpperCase()?"up":"down"),c.timer.isPaused()||c.timer.start(),c.updateCookie();break;case"muted":c.setMuted("TRUE"==a.value?!0:!1),c.updateCookie();break;case"endmuted":c.setEndMuted("TRUE"==a.value?!0:!1),c.updateCookie()}}})}});for(b=0,l=this.times.length;b<l;b++)this.times[b].addEventListener("blur",function(a){this.updateTime(),this.updateCookie()}.bind(this));this.updateCookie(),this.updateDisplay()};Clock.prototype.updateTimer=function(){this.timer.setName(this.title.value),this.updateCookie()},Clock.prototype.updateTime=function(){this.timer.reset(),this.timer.setTime(this.times[0].value+":"+this.times[1].value+":"+this.times[2].value),this.updateCookie()},Clock.prototype.updateDisplay=function(){var a=this.timer.getTime(),b=a.split(":");this.times[0].value=b[0],this.times[1].value=b[1],this.times[2].value===b[2]||this.mute||(this.sound.play(),this.updateCookie()),this.times[2].value=b[2]},Clock.prototype.start=function(){this.started?(this.setReadOnly(!1),this.setPlaying(!1),this.timer.pause(),this.render.stop(),this.started=!1,this.checkSound()):(this.setReadOnly(!0),this.setPlaying(!0),this.updateTimer(),this.timer.start(),this.render.start(),this.started=!0,this.checkSound()),this.updateCookie()},Clock.prototype.stop=function(){this.started=!0,this.start()},Clock.prototype.setPlaying=function(a){var b=this.buttons[0].querySelector("i");a?(b.classList.remove("ion-play"),b.classList.add("ion-pause")):(b.classList.add("ion-play"),b.classList.remove("ion-pause"))},Clock.prototype.setMuted=function(a){this.mute=a,this.sound.muted=this.mute,this.checkSound(),this.updateCookie()},Clock.prototype.setEndMuted=function(a){this.endmute=a,this.endsound.muted=this.endmute,this.updateCookie()},Clock.prototype.checkSound=function(){(!this.started||this.mute)&&this.sound.pause()},Clock.prototype.setReadOnly=function(a){var b,c;for(this.title.readOnly=a,this.title.readOnly=a,b=0,c=this.times.length;c>b;b++)this.times[b].readOnly=a,this.times[b].disabled=a},Clock.prototype.remove=function(a){if(a){this.render.stop(),this.element.remove();var b=new CustomEvent("removeClock",{detail:this.id});document.dispatchEvent(b)}else new Confirm({element:document.querySelector(".checkbox-overlay"),message:"Are you sure you want to delete "+this.timer.getName()+"?",confirm:function(){this.render.stop(),this.element.remove();var a=new CustomEvent("removeClock",{detail:this.id});document.dispatchEvent(a)}.bind(this)}).show()},Clock.prototype.fullscreen=function(){fullScreenEnabled()&&(this.element.requestFullscreen?this.element.requestFullscreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen())},Clock.prototype.getInfo=function(){return{muted:this.mute,endmuteD:this.endmute,id:this.id,name:this.timer.name,direction:this.timer.direction,time:this.timer.timeLeft()}},Clock.prototype.updateCookie=function(){return Cookies.create("clock__"+this.id,JSON.stringify(this.getInfo())),!0};var Picker=function(a,b){"use strict";if(this.chosen_names_elm=document.querySelector("#pickery_chosen_names"),this.all_names_elm=document.querySelector("#pickery_all_names"),this.chosen_name=document.querySelector("#chosen_name"),this.chosen_name_elm=document.querySelector("#chosen_name p"),this.chosen_sound=new Audio,this.chosen_sound.src="sounds/chat_tone.mp3",this.chosen_timeout=null,this.csv_overlay=document.querySelector("#csv_overlay_pickery"),this.all_fields_elm=document.querySelector("#pickery_all_fields"),this.all_fields_info_elm=document.querySelector("#pickery_all_fields_info"),this.all_fields_submit=document.querySelector("#pickery_fields_submit"),this.students=a,this.blacklist=[],this.chosen_names=[],this.fields=b||[],localStorage.getItem("pickery_blacklist")){try{this.blacklist=JSON.parse(localStorage.getItem("pickery_blacklist"))}catch(c){localStorage.clear(),this.blacklist=JSON.parse(localStorage.getItem("pickery_blacklist"))}this.set_chosen_names()}};Picker.prototype.hide_fields=function(){this.csv_overlay.classList.add("hidden"),this.all_fields_elm.innerHTML=""},Picker.prototype.show_fields=function(){this.csv_overlay.classList.remove("hidden");for(var a=0,b=this.students.titles.length;b>a;++a){var c=document.createElement("input");c.type="checkbox",c.id=a,c.onchange=function(a){this.fields.indexOf(a.target.id)>=0?this.fields.splice(this.fields.indexOf(a.target.id),1):this.fields.push(a.target.id)}.bind(this);var d=document.createElement("li"),e=document.createElement("span");e.innerHTML+=this.students.titles[a],d.appendChild(c),d.appendChild(e),this.all_fields_elm.appendChild(d)}},Picker.prototype.set=function(){this.hide_fields();for(var a=0,b=this.students.cells.length;b>a;++a){for(var c=document.createElement("option"),d="",e=0,f=this.fields.length;f>e;++e)d+=this.students.cells[a][this.fields[e]]+" ";c.innerHTML=d,c.id=a,this.all_names_elm.appendChild(c)}this.update_storage()},Picker.prototype.update_storage=function(){localStorage.setItem("pickery_blacklist",JSON.stringify(this.blacklist)),localStorage.setItem("pickery_fields",JSON.stringify(this.fields)),localStorage.setItem("pickery",JSON.stringify(this.students))},Picker.prototype.set_chosen_names=function(){for(var a=0,b=this.blacklist.length;b>a;++a){for(var c=document.createElement("option"),d="",e=0,f=this.fields.length;f>e;++e)d+=this.students.cells[this.blacklist[a]][this.fields[e]]+" ";c.innerHTML=d,c.id=a,this.chosen_names_elm.insertBefore(c,document.querySelector("#pickery_chosen_names > option:first-of-type"))}},Picker.prototype.remove=function(){var a=this.all_names_elm,b=a.options[a.selectedIndex];if(!b)return new Notification("No name selected.","warning"),!1;var c=parseInt(b.id);this.students.cells.splice(c,1),this.all_names_elm.removeChild(document.getElementById(c)),this.update_storage()},Picker.prototype.random=function(){var a,b=document.querySelector("#allow_duplicates").checked;if(!b&&this.blacklist.length>=this.students.cells.length)return new Notification("You've looped through all names."),!1;if(a=Math.floor(Math.random()*(this.students.cells.length-0)),!b){for(;this.blacklist.indexOf(a)>=0;)a=Math.floor(Math.random()*(this.students.cells.length-0));this.blacklist.push(a)}for(var c=this.students.cells[a],d=document.createElement("option"),e="",f=0,g=this.fields.length;g>f;++f)e+=c[this.fields[f]]+" ";this.chosen_names.push(e),d.innerHTML=e,d.id=a,this.chosen_name_elm.innerHTML=e,this.chosen_sound.currentTime=0,this.chosen_sound.play(),this.chosen_name.classList.add("shake"),clearTimeout(this.chosen_timeout),this.chosen_timeout=setTimeout(function(){this.chosen_name.classList.remove("shake")}.bind(this),500),this.chosen_names_elm.insertBefore(d,document.querySelector("#pickery_chosen_names > option:first-of-type")),this.update_storage()},Picker.prototype.clear_history=function(){localStorage.removeItem("pickery_blacklist"),this.blacklist=[],this.chosen_names_elm.innerHTML="",this.chosen_name_elm.innerHTML=""},Picker.prototype.clear_students=function(){localStorage.removeItem("pickery"),localStorage.removeItem("pickery_fields"),this.students=[],this.all_names_elm.innerHTML="",this.fields=""},Picker.prototype.clear_all=function(){this.clear_history(),this.clear_students()};var Grouper=function(a,b){"use strict";return this.students=a,this.student_count=a.cells.length,this.fields=b||[],this.blacklist=[],this.groups={},this.formats={"default":document.querySelector("#set_default"),json:document.querySelector("#set_json"),plain:document.querySelector("#set_plain")},this.group_container_elm=document.querySelector("#groupery_options"),this.groupery_groups_elm=document.querySelector("#groupery_groups"),this.groupery_title_elm=document.querySelector("#groupery_title"),this.generate_groups_elm=document.querySelector("#generate_groups"),this.groupery_format_elm=document.querySelector("#format"),this.all_names_elm=document.querySelector("#groupery_all_names"),this.csv_overlay=document.querySelector("#csv_overlay_groupery"),this.all_fields_elm=document.querySelector("#groupery_all_fields"),this.all_fields_info_elm=document.querySelector("#groupery_all_fields_info"),this.all_fields_submit=document.querySelector("#groupery_fields_submit"),this.student_count>1e3?(new Notification("The maximum amount of importable names is 1000.","warning",3e3),!1):void(localStorage.getItem("groupery_groups")&&(this.groups=JSON.parse(localStorage.getItem("groupery_groups").split(",")),this.set_groups()))};Grouper.prototype.remove=function(){var a=this.all_names_elm,b=a.options[a.selectedIndex];if(!b)return new Notification("No name selected.","warning"),!1;var c=parseInt(b.id);this.students.cells.splice(c,1),this.all_names_elm.removeChild(document.getElementById(c)),this.update_storage()},Grouper.prototype.hide_fields=function(){this.csv_overlay.classList.add("hidden"),this.all_fields_elm.innerHTML=""},Grouper.prototype.show_fields=function(){this.csv_overlay.classList.remove("hidden");for(var a=0,b=this.students.titles.length;b>a;++a){var c=document.createElement("input");c.type="checkbox",c.id=a,c.onchange=function(a){this.fields.indexOf(a.target.id)>=0?this.fields.splice(this.fields.indexOf(a.target.id),1):this.fields.push(a.target.id)}.bind(this);var d=document.createElement("li"),e=document.createElement("span");e.innerHTML+=this.students.titles[a],d.appendChild(c),d.appendChild(e),this.all_fields_elm.appendChild(d)}},Grouper.prototype.set=function(){this.hide_fields();for(var a=0,b=this.students.cells.length;b>a;++a){for(var c=document.createElement("option"),d="",e=0,f=this.fields.length;f>e;++e)d+=this.students.cells[a][this.fields[e]]+" ";c.innerHTML=d,c.id=a,this.all_names_elm.appendChild(c)}this.update_storage()},Grouper.prototype.set_groups=function(){this.clear_active(),this.formats["default"].className="active",this.groupery_groups_elm.style.cssText-="white-space:pre;",this.generate_groups_elm.innerHTML="Reset",this.groupery_title_elm.innerHTML="Groups",this.groupery_groups_elm.innerHTML="",this.group_container_elm.style.display="none",this.groupery_groups_elm.style.display="block",this.groupery_format_elm.style.display="block";for(var a in this.groups){var b=a,c=document.createElement("div"),d=document.createElement("h4");d.innerHTML=b,c.className="group",c.id=b,c.appendChild(d),this.groupery_groups_elm.appendChild(c);for(var e in this.groups[a]){var f=this.groups[a][e],g="";for(var h in f)g+=" "+f[h];document.getElementById(b).innerHTML+=g+"<br>"}}},Grouper.prototype.set_json=function(){this.clear_active(),this.formats.json.className="active";var a=document.createElement("pre");a.innerHTML=JSON.stringify(this.groups,null,4),this.groupery_groups_elm.innerHTML="",this.groupery_groups_elm.appendChild(a)},Grouper.prototype.set_plain=function(){this.clear_active(),this.formats.plain.className="active";var a=document.createElement("p");for(var b in this.groups){var c=b;a.innerHTML+="<p>"+c+"</p>";var d=document.createElement("div"),e=document.createElement("h4");e.innerHTML=c,d.className="group",d.id=c,d.appendChild(e),this.groupery_groups_elm.appendChild(d);for(var f in this.groups[b]){var g=this.groups[b][f],h="";for(var i in g)h+=" "+g[i];a.innerHTML+=h+"<br>"}}this.groupery_groups_elm.innerHTML="",this.groupery_groups_elm.appendChild(a)},Grouper.prototype.clear_active=function(){for(var a in this.formats)this.formats[a].classList.remove("active")},Grouper.prototype.update_storage=function(){localStorage.setItem("groupery_fields",JSON.stringify(this.fields)),localStorage.setItem("groupery",JSON.stringify(this.students))},Grouper.prototype.clear_groups=function(){this.generate_groups_elm.innerHTML="Generate groups",this.groupery_title_elm.innerHTML="Options",this.groupery_groups_elm.innerHTML="",this.group_container_elm.style.display="inherit",this.groupery_groups_elm.style.display="none",this.groupery_format_elm.style.display="none",localStorage.removeItem("groupery_groups"),this.groups={},this.blacklist=[]},Grouper.prototype.clear_students=function(){this.students=[],localStorage.removeItem("groupery"),document.querySelector("#groupery_all_names").innerHTML="",document.querySelector("#groupery_students").innerHTML=""},Grouper.prototype.clear_all=function(){this.clear_groups(),this.clear_students()},Grouper.prototype.random=function(){var a;if(this.blacklist.length>=this.students.cells.length)return!1;for(a=Math.floor(Math.random()*(this.students.cells.length-0));this.blacklist.indexOf(a)>=0;)a=Math.floor(Math.random()*(this.students.cells.length-0));this.blacklist.push(a);for(var b=this.students.cells[a],c=[],d=0,e=this.fields.length;e>d;++d)c.push(b[this.fields[d]]);return c},Grouper.prototype.generate_groups=function(){var a=document.querySelector("#n_students").value||null,b=document.querySelector("#n_groups").value||null;if(Object.keys(this.groups).length)return this.clear_groups(),a="",b="",!1;if(!a&&!b)return new Notification("Please select an option for creating groups.","normal",3e3),!1;if(b){if(b>Math.floor(this.student_count/2))return new Notification("Can't create "+b+" groups. Maximum amount possible to create is "+Math.floor(this.student_count/2),"warning",3e3),!1;this.make_groups(parseInt(b),null)}else{if(!a)return new Notification("Something went wrong. Please try again.","normal",3e3),!1;if(a>Math.floor(this.student_count/2))return new Notification("Can't create groups with "+a+" students. Maximum amount students per group is "+Math.floor(this.student_count/2),"warning",3e3),!1;this.make_groups(null,parseInt(a))}this.set_groups(),localStorage.setItem("groupery_groups",JSON.stringify(this.groups))},Grouper.prototype.make_groups=function(a,b){for(var c,d,e,f,g,h,i=[],j=0;name=this.random();)i.push(name.split(","));if(a){var k=Math.floor(this.student_count/a);if(1>=a)return new Notification("Please enter a valid number above one.","normal",3e3),!1;for(c=1,h=0;a>=c;++c,h+=k)for(this.groups["Group "+c]={},d=h,e=0;h+k>d;++d,++e){for(this.groups["Group "+c][e]={},f=0,g=i[d].length;g>f;++f){var l=this.students.titles[this.fields[f]];this.groups["Group "+c][e][l]=i[d][f]}j++}}else if(b){if(a=Math.ceil(this.student_count/b),1>=a)return new Notification("Please enter a valid number above one.","normal",3e3),!1;for(c=1,h=0;a>=c;++c,h+=b)for(this.groups["Group "+c]={},d=h,e=0;h+b>d;++d,++e)if(i[d]){for(this.groups["Group "+c][e]={},f=0,g=i[d].length;g>f;++f){var l=this.students.titles[this.fields[f]];this.groups["Group "+c][e][l]=i[d][f]}j++}}if(i.splice(0,j),i){var m=Object.keys(this.groups["Group "+a]).length;for(d=0,c=m;c<m+i.length;++d,++c)if(i[d])for(this.groups["Group "+a][c]={},f=0,g=i[d].length;g>f;++f){var l=this.students.titles[this.fields[f]];this.groups["Group "+a][c][l]=i[d][f]}}new Notification("Created "+a+" groups.","normal",3e3)},function(){var a=[];if(document.cookie)for(var b=Cookies.get("clock_count"),c=0;b+1>c;c++){var d=Cookies.get("clock__"+c);null!==d&&(d=JSON.parse(d),a[c]=new Clock({appendTo:document.querySelector("main.timery"),id:d.id,name:d.name,direction:d.direction,time:d.time,mute:d.muted,endmute:d.endmuted}))}document.querySelector(".addTimer").onclick=function(b){b.preventDefault();var c=0;for(var d in a)c=d;c++,a[c]=new Clock({appendTo:document.querySelector("main.timery"),id:c,name:"clock"+c}),new Notification("Clock"+c+" added.","normal"),Cookies.create("clock_count",c)},document.querySelector(".muteSounds").onclick=function(b){b.preventDefault();for(var c in a)a[c].setMuted(!0),a[c].setEndMuted(!0)},document.querySelector(".removeTimers").onclick=function(b){b.preventDefault();var c=0;for(var d in a)c++;return 1>c?!1:void new Confirm({element:document.querySelector(".checkbox-overlay"),message:"Are you sure you want to delete all clocks?",confirm:function(){for(d in a)a[d].remove(!0),Cookies.remove("clock__"+d);Cookies.remove("clock_count")}}).show()},document.addEventListener("removeClock",function(b){var c=a[b.detail].timer.getName();new Notification(c+" removed.","warning"),a[b.detail]=null,delete a[b.detail],Cookies.remove("clock__"+b.detail)})}();var Settings={base_default:"214E98",text_default:"191919",background_default:"FFFFFF",mute_default:1,clock_default:"00:10:00",finish_default:"airhorn",test_color:function(a){var b=new RegExp("([a-fA-F0-9]+)"),c=b.exec(a);return a?!c||3!==c[0].length&&6!==c[0].length?(new Notification("Not a valid color: "+a,"warning",2500),!1):(Cookies.create("settings",JSON.stringify(settings)),c[0]):(new Notification("Please enter a color."),!1)}};!function(){function a(){var a=k.href.split("?");k.href=a[0]+"?id="+(new Date).getMilliseconds()}var b=JSON.parse(Cookies.get("settings"))||{base_color:Settings.base_default,text_color:Settings.text_default,background_color:Settings.background_default,clock:Settings.clock_default,finish:Settings.finish_default},c=document.querySelector("#base_color_hash"),d=document.querySelector("#background_color_hash"),e=document.querySelector("#text_color_hash"),f=document.querySelector("#base_color"),g=document.querySelector("#background_color"),h=document.querySelector("#text_color"),i=document.querySelectorAll(".clock_default"),j=document.querySelectorAll(".finish"),k=document.querySelector("#stylesheet");f.value=b.base_color,g.value=b.background_color,h.value=b.text_color,f.addEventListener("blur",function(){b.base_color=Settings.test_color(this.value),Cookies.create("settings",JSON.stringify(b)),a()}),g.addEventListener("blur",function(){b.background_color=Settings.test_color(this.value),Cookies.create("settings",JSON.stringify(b)),a()}),h.addEventListener("blur",function(){b.text_color=Settings.test_color(this.value),Cookies.create("settings",JSON.stringify(b)),a()}),document.querySelector("#base_reset").onclick=function(){b.base_color=Settings.base_default,Cookies.create("settings",JSON.stringify(b)),window.location.reload()},document.querySelector("#background_reset").onclick=function(){b.background_color=Settings.background_default,Cookies.create("settings",JSON.stringify(b)),window.location.reload()},document.querySelector("#text_reset").onclick=function(){b.text_color=Settings.text_default,Cookies.create("settings",JSON.stringify(b)),window.location.reload()},document.querySelector("#time_reset").onclick=function(){var a=clock_default.split(":");i[0].value=a[0],i[1].value=a[1],i[2].value=a[2],Cookies.create("settings",JSON.stringify(b))};for(var l=b.clock.split(":"),m=0;m<i.length;m++)i[m].value=l[m],i[m].addEventListener("blur",function(){b.clock=i[0].value+":"+i[1].value+":"+i[2].value,Cookies.create("settings",JSON.stringify(b))});for(m=0;m<j.length;++m)j[m].onclick=function(){b.finish=this.id;for(var a=0;a<j.length;++a)j[a].classList.remove("active");this.classList.add("active"),Cookies.create("settings",JSON.stringify(b))},j[m].id===b.finish&&j[m].classList.add("active");c.onchange=function(){f.value=c.value.slice(1,7),b.base_color=c.value.slice(1,7),Cookies.create("settings",JSON.stringify(b)),a()},d.onchange=function(){g.value=d.value.slice(1,7),b.background_color=d.value.slice(1,7),Cookies.create("settings",JSON.stringify(b)),a()},e.onchange=function(){h.value=e.value.slice(1,7),b.text_color=e.value.slice(1,7),Cookies.create("settings",JSON.stringify(b)),a()};var n=document.querySelector(".auto-mute").querySelectorAll(".bool");0===b.auto_mute?n[0].classList.add("active"):n[1].classList.add("active"),n[0].onclick=function(){n[1].classList.remove("active"),n[0].classList.add("active"),b.auto_mute=1,Cookies.create("settings",JSON.stringify(b))},n[1].onclick=function(){n[0].classList.remove("active"),n[1].classList.add("active"),b.auto_mute=0,Cookies.create("settings",JSON.stringify(b))}}(),function(){"use strict";var a;return localStorage.getItem("pickery")&&localStorage.getItem("pickery_fields")&&(a=new Picker(JSON.parse(localStorage.getItem("pickery")),JSON.parse(localStorage.getItem("pickery_fields"))),a.set()),window.FileReader?(document.querySelector("#pickery_class_magister").addEventListener("change",function(){var b=this.files[0];if(b.size>1e5)return new Notification("File size too large.","warning",4e3),!1;if(!b)return new Notification("Failed to load file.","warning",4e3),!1;var c=new FileReader;c.readAsText(b),c.onload=function(){a=new Picker(CSV.to_json(this.result),[2,3,4]),a.set(),new Notification("Imported "+b.name.replace(".csv",""),"normal",4e3),localStorage.setItem("pickery",JSON.stringify(a.students))}},!1),document.querySelector("#pickery_class").addEventListener("change",function(){var b=this.files[0];if(b.size>1e6)return new Notification("File size too large.","warning",4e3),!1;if(!b)return new Notification("Failed to load file.","warning",4e3),!1;var c=new FileReader;c.readAsText(b),c.onload=function(){a=new Picker(CSV.to_json(this.result)),a.show_fields(),new Notification("Imported "+b.name.replace(".csv",""),"normal",4e3),localStorage.setItem("pickery",JSON.stringify(a.students))}},!1),document.querySelector("#pickery_delete_name").onclick=function(){a.remove()},document.querySelector("#pickery_fields_submit").onclick=function(){a.set()},document.querySelector("#pickery_clear_history").onclick=function(){return document.querySelector("#pickery_chosen_names").children.length?void a.clear_history():(new Notification("Nothing to clear","normal",4e3),!1)},document.querySelector("#pickery_clear_all").onclick=function(){a.clear_all()},document.querySelector("#pickery_post_random").onclick=function(){a.random("#pickery_chosen_names")},void(document.querySelector("#allow_duplicates").onclick=function(){var a=document.querySelector(".dupes");this.checked?(new Notification("Duplicates enabled","normal"),a.classList.remove("disabled"),a.classList.add("enabled")):(new Notification("Duplicates disabled","warning"),a.classList.remove("enabled"),a.classList.add("disabled"))})):(document.querySelector("#uploadcsv").innerHTML="Your browser does not support window.FileReader. Uploading files will not be possible.",!1)}(),function(){"use strict";var a;return localStorage.getItem("groupery")&&localStorage.getItem("groupery_fields")&&(a=new Grouper(JSON.parse(localStorage.getItem("groupery")),JSON.parse(localStorage.getItem("groupery_fields"))),a.set()),window.FileReader?(document.querySelector("#groupery_class_magister").addEventListener("change",function(){var b=this.files[0];if(b.size>1e5)return new Notification("File size too large.","warning",4e3),!1;if(!b)return new Notification("Failed to load file.","warning",4e3),!1;var c=new FileReader;c.readAsText(b),c.onload=function(){a=new Grouper(CSV.to_json(this.result),[2,3,4]),a.set(),new Notification("Imported "+b.name.replace(".csv",""),"normal",4e3),localStorage.setItem("groupery",JSON.stringify(a.students))}},!1),document.querySelector("#groupery_class").addEventListener("change",function(){var b=this.files[0];if(b.size>1e5)return new Notification("File size too large.","warning",4e3),!1;if(!b)return new Notification("Failed to load file.","warning",4e3),!1;var c=new FileReader;c.readAsText(b),c.onload=function(){a=new Grouper(CSV.to_json(this.result)),a.show_fields(),new Notification("Imported "+b.name.replace(".csv",""),"normal",4e3),localStorage.setItem("groupery",JSON.stringify(a.students))}},!1),document.querySelector("#n_students").onblur=function(){document.querySelector("#n_groups").disabled=document.querySelector("#n_students").value.replace(" ","")?!0:!1},document.querySelector("#n_groups").onblur=function(){document.querySelector("#n_students").disabled=document.querySelector("#n_groups").value.replace(" ","")?!0:!1},document.querySelector("#groupery_clear_all").onclick=function(){a.clear_all()},document.querySelector("#groupery_delete_name").onclick=function(){a.remove()},document.querySelector("#generate_groups").onclick=function(){a?a.generate_groups():new Notification("No CSV imported","warning",4e3)},document.querySelector("#set_default").onclick=function(){a.set_groups()},document.querySelector("#set_json").onclick=function(){a.set_json()},document.querySelector("#set_plain").onclick=function(){a.set_plain()},void(document.querySelector("#groupery_fields_submit").onclick=function(){a.set()})):(document.querySelector("#uploadcsv").innerHTML="Your browser does not support window.FileReader. Uploading files will not be possible.",!1)}(),function(){function a(a){var b=document.querySelector("title"),c=a||window.location.hash;c=c.substr(1);var d=b.innerHTML.split(" - ");b.innerHTML=d[0]+" - "+c}if(!Cookies.get("cookie_warn")){var b=document.createElement("p"),c=document.createElement("i");b.innerHTML="In order to function properly, this site uses cookies.",c.className="icon ion-close",c.id="close-cookie",document.querySelector(".cookie").appendChild(b),document.querySelector(".cookie").appendChild(c),document.querySelector("#close-cookie").onclick=function(){Cookies.create("cookie_warn",1),document.querySelector(".cookie").classList.add("hidden"),setTimeout(function(){document.querySelector(".cookie").display="none"},1e3)}}var d=""!==window.location.hash?window.location.hash:"#home";"#"===d&&(d="#home"),a(d);var e=document.querySelector(d);e&&e.classList.add("show");var f=document.querySelector(window.location.hash+"_menu");

f&&f.classList.add("active"),window.onhashchange=function(){var b=document.querySelectorAll(".page.show"),c=document.querySelectorAll(".menu");for(d=0;d<b.length;d++)b[d].classList.remove("show");for(var d=0;d<c.length;++d)c[d].classList.remove("active");var e=document.querySelector(window.location.hash);e&&e.classList.add("show");var f=document.querySelector(window.location.hash+"_menu");f&&f.classList.add("active"),a()}}();